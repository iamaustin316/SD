"use strict";var isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows()}};function ga_click(e,t,n){t=isMobile.any()?n:t;gtag("event",e,{event_category:t})}!function(t){var e=document.querySelector(".wrap");setTimeout(function(){e.scrollTo(0,0)},1);var n=t("html").hasClass("mobile")||"",i=t(".section-dark"),o=gsap.utils.toArray(".intro-text");function a(){i.hasClass("end")||(i.addClass("end"),e.classList.add("end"),ga_click("pv","pv-index","pv-m-index"),s.init(),c.init(),AOS.init())}t("html").on("click",".section-dark",function(e){"section-dark"===t(this)[0].className&&t(".section-dark__btn-close").trigger("click")}),gsap.to(".preloader__range-inner",{width:"100%",duration:2,ease:"none",onComplete:function(){t(".preloader").addClass("loaded"),setTimeout(function(){var e;window.location.hash?(e=window.location.hash,console.log(e),t(e).length&&(a(),"index"!==e&&setTimeout(function(){t.smoothScroll({scrollTarget:e,speed:1200,easing:"easeInOutQuart",offset:n?0:-u.outerHeight()})},1e3),"#winner"===e&&setTimeout(function(){console.log("11"),t("#winner").addClass("active")},200))):(gsap.to(".section-dark__btn-close",{opacity:1,duration:1,delay:0}),ga_click("pv","pv-intro","pv-m-intro"),o.forEach(function(e,t){var n=gsap.timeline({delay:t,onComplete:function(){t===o.length-1&&a()}});n.to(e,{y:-30,opacity:1,duration:.7,ease:"none"}),n.to(e,{y:-120,duration:2.2,ease:"none"}),n.to(e,{y:-220,opacity:0,duration:2.4,ease:"none"})}))},1300)}}),t(".section-dark__btn-close").on("click",function(){i.addClass("end"),e.classList.add("end"),ga_click("pv","pv-index","pv-m-index"),s.init(),c.init(),AOS.init({duration:1e3})}),gsap.fromTo(".section-intro__door-outline-img",{scale:0,opacity:0},{scale:1.2,opacity:.35,repeat:99,duration:2.4,stagger:{each:.2,repeat:-1}});var s=new Swiper(".shoeSwiper",{speed:1e3,loop:!0,init:!1,autoplay:{delay:1e3}}),c=new Swiper(".videoSwiper",{speed:1e3,effect:"fade",init:!1,fadeEffect:{crossFade:!0},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});t(".section-intro__btn-join").on("click",function(e){e.preventDefault(),gsap.to(".section-intro",{scale:1.3,opacity:0,duration:1.6,ease:"power4.in",onComplete:function(){window.location.href="/wish/wish"}})}),t(".site-header__btn-toggle").on("click",function(e){e.preventDefault(),t(this).toggleClass("active"),t(".site-header__nav").toggleClass("active")}),t(".section-chance__btn").on("click",function(e){t(this).addClass("active"),t(this).next().addClass("active")}),t(".section-chance__btn-close").on("click",function(e){t(this).parent().removeClass("active"),t(".section-line-chance__btn").removeClass("active")}),new ClipboardJS(".section-chance__btn-copy").on("success",function(e){alert("邀請碼複製成功!")});var r=t(".section-block"),l="";function d(){t(".btn-section[href='#"+l+"']").addClass("active").siblings().removeClass("active")}r.waypoint(function(e){"down"===e&&(l=this.element.id,e=this.element.id,console.log(e),"index"===this.element.id&&ga_click("pv","Pv-home","Pv-M-home"),"video"===this.element.id&&ga_click("pv","Pv-1","Pv-M-1"),"event"===this.element.id&&ga_click("pv","Pv-2","Pv-M-2"),"rule"===this.element.id&&ga_click("pv","Pv-3","Pv-M-3"),d())},{offset:"10%"}),r.waypoint(function(e){"up"===e&&(l=this.element.id,d())},{offset:"-1%"});var u=t(".site-header");t(".btn-section").on("click",function(e){e.preventDefault();e=t(this).attr("href");return t(".site-header__btn-toggle").hasClass("is-active")&&(t(".site-header__btn-toggle").removeClass("active"),t(".site-header__nav").removeClass("active")),t.smoothScroll({scrollTarget:e,speed:1600,easing:"easeInOutQuart",offset:n?0:-u.outerHeight()}),!1});var v,r=t("<button/>").attr("class","btn-gotop");t(".wrap").append(r),t(".btn-gotop").on("click",function(e){return e.preventDefault(),t("body,html").animate({scrollTop:0},1300,"easeInOutExpo"),!1}),t(".wrap").waypoint({handler:function(e){t(".btn-gotop").toggleClass("is-active")},offset:"-1%"});var p=t("#video-modal"),f=t("#winner");t(".section-video__btn-play").on("click",function(e){e.preventDefault(),v=t(this).data("src"),p.addClass("active"),t("#yt-video").attr("src",v+"?autoplay=1&amp;modestbranding=1&amp;showinfo=0"),t("body").addClass("fixed")}),t(".modal__btn-close").on("click",function(e){e.preventDefault(),p.removeClass("active"),t("body").removeClass("fixed"),t("#yt-video").attr("src","")}),t(".btn-winner").on("click",function(e){e.preventDefault(),f.addClass("active"),t("body").addClass("fixed")}),t(".winner-modal__btn-close").on("click",function(e){e.preventDefault(),f.removeClass("active"),t("body").removeClass("fixed")})}(jQuery);