<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>員工自主服務平台</title>
    <link rel="stylesheet" href="css/site.css">
</head>
<body>
    <div class="wrap">
        <section class="section-home">
            <!--bg-clouds-->
            <div class="bg-clouds-left"></div>
            <div class="bg-clouds-top"></div>
            <div class="bg-clouds-right"></div>
            <!--bg-clouds-->
            <!--user-profile--->
            <div class="user-profile">
                <div class="user-profile__avatar">
                    <img src="https://i.pravatar.cc/150?img=26" alt="Claire">
                </div>
                <div class="user-profile__dropdown">
                    <a class="user-profile__btn-greeting" href="#">Hi Claire</a>
                    <a class="user-profile__btn-logout" href="#">登出</a>
                </div>
            </div>
            <!--user-profile--->
            <!--site-nav-->
            <div class="site-nav">
                <div class="site-nav__header">
                    <h1 class="site-nav__logo"><a href="home.html">第一保員工服務網站</a></h1>
                    <button class="site-nav__btn-toggle"></button>
                </div>
                <ul class="site-nav__nav-list">
                    <li>
                        <a class="site-nav__btn" href="#" title="電子表單"><i class="icon-form"></i>電子表單</a>
                        <div class="site-nav__sub-nav">
                            <div class="site-nav__sub-nav-inner">
                                <a class="site-nav__btn-sub" href="#" title="物品請領">物品請領</a>
                                <a class="site-nav__btn-sub" href="#" title="名片申請">名片申請</a>
                                <a class="site-nav__btn-sub" href="#" title="電腦聯繫單">電腦聯繫單</a>
                                <a class="site-nav__btn-sub" href="#" title="出差費用核銷">出差費用核銷</a>
                                <a class="site-nav__btn-sub" href="#" title="Outlook網頁版">Outlook網頁版</a>
                                <a class="site-nav__btn-sub" href="#" title="線上會議室租借">線上會議室租借</a>
                                <a class="site-nav__btn-sub" href="#" title="雲端硬碟">雲端硬碟</a>
                            </div>
                        </div>
                    </li>
                    <li>
                        <a class="site-nav__btn" href="#" title="人事系統"><i class="icon-personnel"></i>人事系統</a>
                        <div class="site-nav__sub-nav">
                            <div class="site-nav__sub-nav-inner">
                                <a class="site-nav__btn-sub" href="#" title="人資考核">人資考核</a>
                                <a class="site-nav__btn-sub" href="#" title="員工所屬單位/職稱/分機">員工所屬單位/職稱/分機</a>
                                <a class="site-nav__btn-sub" href="#" title="出缺勤系統">出缺勤系統</a>
                                <a class="site-nav__btn-sub" href="#" title="請假系統">請假系統</a>
                            </div>
                        </div>
                    </li>
                    <li>
                        <a class="site-nav__btn" href="#" title="人事系統"><i class="icon-welfare"></i>福委會福利</a>
                        <div class="site-nav__sub-nav">
                            <div class="site-nav__sub-nav-inner">
                                <a class="site-nav__btn-sub" href="#" title="員工福利">員工福利</a>
                                <a class="site-nav__btn-sub" href="#" title="團購專區">團購專區</a>
                                <a class="site-nav__btn-sub" href="#" title="點數換購">點數換購</a>
                                <a class="site-nav__btn-sub" href="#" title="好康報報">好康報報</a>
                                <a class="site-nav__btn-sub" href="#" title="按摩預約">按摩預約</a>
                            </div>
                        </div>
                    </li>
                    <li>
                        <a class="site-nav__btn" href="#" title="學習平台"><i class="icon-learning"></i>學習平台</a>
                        <div class="site-nav__sub-nav">
                            <div class="site-nav__sub-nav-inner">
                                <a class="site-nav__btn-sub" href="#" title="物品請領">教育訓練</a>
                                <a class="site-nav__btn-sub" href="#" title="名片申請">新人訓練</a>
                                <a class="site-nav__btn-sub" href="#" title="國外教育訓練">國外教育訓練</a>
                                <a class="site-nav__btn-sub" href="#" title="法學小教室">法學小教室</a>
                                <a class="site-nav__btn-sub" href="#" title="績優業務分享">績優業務分享</a>
                                <a class="site-nav__btn-sub" href="#" title="副總時間">副總時間</a>
                                <a class="site-nav__btn-sub" href="#" title="企劃室時間">企劃室時間</a>
                                <a class="site-nav__btn-sub" href="#" title="快問快答">快問快答</a>
                                <a class="site-nav__btn-sub" href="#" title="電子圖書館">電子圖書館</a>
                            </div>
                        </div>
                    </li>
                    <li>
                        <a class="site-nav__btn" href="#" title="公文核簽"><i class="icon-verification"></i>公文核簽</a>
                        <div class="site-nav__sub-nav">
                            <div class="site-nav__sub-nav-inner">
                                <a class="site-nav__btn-sub" href="#" title="公文簽核系統">公文簽核系統</a>
                                <a class="site-nav__btn-sub" href="#" title="後台管理">後台管理</a>
                                <a class="site-nav__btn-sub" href="#" title="公文倉儲">公文倉儲</a>
                            </div>
                        </div>
                    </li>
                    <li>
                        <a class="site-nav__btn" href="#" title="佈告欄"><i class="icon-board"></i>佈告欄</a>
                        <div class="site-nav__sub-nav">
                            <div class="site-nav__sub-nav-inner">
                                <a class="site-nav__btn-sub" href="#" title="電子佈告欄">電子佈告欄</a>
                                <a class="site-nav__btn-sub" href="#" title="內部重要訊息">內部重要訊息</a>
                            </div>
                        </div>
                    </li>
                    <li>
                        <a class="site-nav__btn" href="#" title="規章辦法"><i class="icon-regulations"></i>規章辦法</a>
                        <div class="site-nav__sub-nav">
                            <div class="site-nav__sub-nav-inner">
                                <a class="site-nav__btn-sub" href="#" title="規章辦法">規章辦法</a>
                                <a class="site-nav__btn-sub" href="#" title="清楚的內部文件">清楚的內部文件</a>
                                <a class="site-nav__btn-sub" href="#" title="文件下載">文件下載</a>
                                <a class="site-nav__btn-sub" href="#" title="表單下載">表單下載</a>
                            </div>
                        </div>
                    </li>
                    <li>
                        <a class="site-nav__btn" href="#" title="部室網頁"><i class="icon-department"></i>部室網頁</a>
                        <div class="site-nav__sub-nav">
                            <div class="site-nav__sub-nav-inner">
                                <a class="site-nav__btn-sub" href="#" title="部室網頁">部室網頁</a>
                                <a class="site-nav__btn-sub" href="#" title="組成成員">組成成員</a>
                                <a class="site-nav__btn-sub" href="#" title="各險部作業內容">各險部作業內容</a>
                                <a class="site-nav__btn-sub" href="#" title="部門商品資訊">部門商品資訊</a>
                                <a class="site-nav__btn-sub" href="#" title="個人專區">個人專區</a>
                                <a class="site-nav__btn-sub" href="#" title="通訊錄">通訊錄</a>
                            </div>
                        </div>
                    </li>
                    <li>
                        <a class="site-nav__btn" href="#" title="報表"><i class="icon-report"></i>報表</a>
                        <div class="site-nav__sub-nav">
                            <div class="site-nav__sub-nav-inner">
                                <a class="site-nav__btn-sub" href="#" title="各單位報表">各單位報表</a>
                                <a class="site-nav__btn-sub" href="#" title="統計資料">統計資料</a>
                            </div>
                        </div>
                    </li>
                    <li>
                        <a class="site-nav__btn" href="#" title="業務系統"><i class="icon-business"></i>業務系統</a>
                        <div class="site-nav__sub-nav">
                            <div class="site-nav__sub-nav-inner">
                                <a class="site-nav__btn-sub" href="#" title="業務專區(E保通)">業務專區(E保通)</a>
                                <a class="site-nav__btn-sub" href="#" title="OD平台">OD平台</a>
                                <a class="site-nav__btn-sub" href="#" title="SAP">SAP</a>
                                <a class="site-nav__btn-sub" href="#" title="繳交系統">繳交系統</a>
                                <a class="site-nav__btn-sub" href="#" title="KYC">KYC</a>
                                <a class="site-nav__btn-sub" href="#" title="客服流程">客服流程</a>
                            </div>
                        </div>
                    </li>
                    <li>
                        <a class="site-nav__btn" href="#" title="主題討論區"><i class="icon-discussion"></i>主題討論區</a>
                        <div class="site-nav__sub-nav">
                            <div class="site-nav__sub-nav-inner">
                                <a class="site-nav__btn-sub" href="#" title="主題討論區">主題討論區</a>
                            </div>
                        </div>
                    </li>
                    <li>
                        <a class="site-nav__btn" href="#" title="網站導覽"><i class="icon-sitemap"></i>網站導覽</a>
                        <div class="site-nav__sub-nav">
                            <div class="site-nav__sub-nav-inner">
                                <a class="site-nav__btn-sub" href="#" title="網站導覽sitemap">網站導覽sitemap</a>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
            <!--site-nav-->
            <!--site-page-container-->
            <div class="site-page-container">
                <h2 class="site-page-container__title">
                    <span>個人資料</span>
                </h2>
                <div class="site-page-container__container profile">
                    <div class="profile-page">
                        <div class="profile-page__wrap">
                            <!--照片上傳-->
                            <div class="profile-page__avatar-edit">
                                <header class="profile-page__header">
                                    <h3>照片上傳</h3>
                                </header>
                                <div class="profile-page__content">
                                    <div class="profile-page__avatar">
                                        <img id="user-avatar" src="images/firstins-avatar@3x.png" alt="林美美">
                                    </div>
                                    <div class="profile-page__upload">
                                        <div class="profile-page__upload-wrap">
                                            <input type="file" id="avatar-input" accept="image/png, image/jpeg" hidden>
                                            <span id="file-chosen">尚未選擇檔案</span>
                                            <label for="avatar-input">選擇檔案</label>
                                        </div>
                                        <button class="profile-page__btn-upload">上傳</button>
                                        <span id="status" name="status">資料已更新!</span>
                                    </div>
                                </div>
                            </div>
                            <!--照片上傳-->
                            <!--編輯資料-->
                            <div class="profile-page__profile-edit">
                                <header class="profile-page__header">
                                    <h3>編輯資料</h3>
                                </header>
                                <div class="profile-page__profile-content">
                                    <div class="profile-page__rows">
                                        <span class="profile-page__label">員工編號</span>
                                        <span class="profile-page__value">165161615</span>
                                    </div>
                                    <div class="profile-page__rows">
                                        <span class="profile-page__label">員工姓名</span>
                                        <span class="profile-page__value">林美美</span>
                                    </div>
                                    <div class="profile-page__rows">
                                        <span class="profile-page__label">區域名稱</span>
                                        <span class="profile-page__value">事業群</span>
                                    </div>
                                    <div class="profile-page__rows">
                                        <span class="profile-page__label">部門名稱</span>
                                        <span class="profile-page__value">汽車保險部</span>
                                    </div>
                                    <div class="profile-page__rows">
                                        <span class="profile-page__label">電子郵件</span>
                                        <span class="profile-page__value">esdrf.dbs@firstins.com.tw</span>
                                    </div>
                                    <div class="profile-page__rows">
                                        <span class="profile-page__label">部門電話</span>
                                        <span class="profile-page__value">(02)2391-3271 </span>
                                    </div>
                                    <div class="profile-page__rows">
                                        <span class="profile-page__label">個人分機</span>
                                        <span class="profile-page__value">#2320</span>
                                    </div>
                                    <div class="profile-page__rows">
                                        <span class="profile-page__label">個人手機</span>
                                        <span class="profile-page__value">0933-456789</span>
                                        <span class="profile-page__public">
                                            <label for="public">是否公開</label>
                                            <input type="checkbox" id="public">
                                        </span>
                                    </div>
                                    <div class="profile-page__rows">
                                        <button class="profile-page__btn-update">更新</button>
                                    </div>
                                </div>
                            </div>
                            <!--照片上傳-->
                        </div>
                    </div>
                </div>
            </div>
            <!--site-page-container-->
        </section>
    </div>
    <!--image-upload-croppie-->
    <div class="image-croppie">
        <div class="image-croppie__inner">
            <div id="edit-picture"></div>
            <div class="image-croppie__control">
                <button class="image-croppie__btn-crop">確定</button>
            </div>
        </div>
    </div>
    <!--image-upload-croppie-->
    <script src="js/all.js"></script>
    <script src="js/site.js"></script>
    <script>
        $(function(){
            let $editPicture = $('#edit-picture')

            const avatarInput = document.getElementById('avatar-input')
            const fileChosen = document.getElementById('file-chosen')
            const userAvatar = document.getElementById('user-avatar')

            avatarInput.addEventListener('change', function(){
                let fileName = this.files[0].name
                fileChosen.textContent = `${fileName.slice(0,8)}...`
                loadImage()
            })

            const toBase64 = file => new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => resolve(reader.result);
                reader.onerror = error => reject(error);
            });

            async function loadImage() {
                const file = avatarInput.files[0]
                editPicture(await toBase64(file))
            }

            function editPicture(src) {
                $editPicture.croppie({
                    url: src,
                    enableExif: true,
                    enableOrientation: true,
                    orientation: 4,
                    viewport: {
                        width: 240,
                        height: 240
                    }
                })
                $('.image-croppie').addClass('active')
            }

            $('.image-croppie__btn-crop').on('click', function(){
                $editPicture.croppie('result', {
                    type: 'base64',
                    format: 'jpeg',
                    quality: '0.9',//萬一檔案太大可以降低quality參數
                    size: {
                        width: 240,
                        height: 240
                    }
                }).then(function(res) {
                    $('.image-croppie').removeClass('active')
                    userAvatar.src = res
                    $editPicture.croppie('destroy')
                    //這裡可以將res送到資料庫
                })
            })
        })
    </script>
</body>
</html>